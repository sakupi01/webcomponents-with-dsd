<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      .hello-world {
        background-color: red;
        color: white;
        padding: 15px 32px;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div style="margin: 3%; padding: 3%; border: 3px solid black;">
      <h1>↓Normal Button↓</h1>
      <button class="hello-world">I must be RED</button>
    </div>

    <div style="margin: 3%; padding: 3%; border: 3px solid black;">
      <h1>↓Simple Custom Elements↓</h1>
      <hello-world content="Custom Element"></hello-world>
      <hello-world content="Custom Element"></hello-world>
      <hello-world content="Custom Element"></hello-world>
    </div>

    <div style="margin: 3%; padding: 3%; border: 3px solid black;">
      <h1>↓Shadowed Custom Elements↓</h1>
      <shadowed-hello-world content="Shadow DOM"></shadowed-hello-world>
      <shadowed-hello-world content="Shadow DOM"></shadowed-hello-world>
      <shadowed-hello-world content="Shadow DOM"></shadowed-hello-world>
    </div>
  </body>
  <script>
    // カスタムエレメントのみ
    class HelloWorld extends HTMLElement {
      connectedCallback() {
        // buttonとそのスタイルを定義
        const content = this.getAttribute("content") || "World";
        const button = document.createElement("button");
        button.textContent = `Hello ${content}`;
        const style = document.createElement("style");
        style.textContent = `
          .hello-world {
            background-color: blue;
            color: white;
            padding: 15px 32px;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
          }
        `;
        document.head.appendChild(style);
        button.classList.add("hello-world");

        // buttonがクリックされたときの処理
        button.addEventListener("click", () => {
          alert(`Hello, ${content}!`);
        });

        this.appendChild(button);
      }
    }

    window.customElements.define("hello-world", HelloWorld);

    // Shadow DOMを使ったカスタムエレメント
    class ShadowedHelloWorld extends HTMLElement {
      constructor() {
        super();
        // Shadow DOM を作成
        this.attachShadow({ mode: "open" });
      }

      connectedCallback() {
        const content = this.getAttribute("content") || "World";

        // buttonとそのスタイルをShadow DOM内に定義
        this.shadowRoot.innerHTML = `
            <style>
              .hello-world {
                background-color: blue;
                color: white;
                padding: 15px 32px;
                font-size: 16px;
                margin: 4px 2px;
                cursor: pointer;
              }
            </style>
            <button class="hello-world">Hello ${content}</button>
          `;

        // buttonがクリックされたときの処理
        const button = this.shadowRoot.querySelector("button");
        button.addEventListener("click", () => {
          alert(`Hello, ${content}!`);
        });
      }
    }

    window.customElements.define("shadowed-hello-world", ShadowedHelloWorld);
  </script>
</html>
